{
  "genre": "F",
  "label": "Unité de gestion",
  "label_list": "Unités de gestion",
  "map_label_field_name": "base_site_name",
  "export_pdf": [
    {
      "template": "fiche_aire.html",
      "label": "Export PDF"
    }
  ],
  "display_properties": [
    "id_inventor",
    "sites_group_name",
    "sites_group_code",
    "sites_group_description",
    "comments",
    "nb_sites",
    "id_proprietaire",
    "gestionnaire_actif",
    "id_gestionnaire_secondaire",
    "condition_acces"
  ],
  "display_list": ["sites_group_name", "nb_sites"],
  "specific": {
    "id_inventor": {
      "attribut_label": "Gestionnaire principal",
      "type_widget": "observers",
      "type_util": "user",
      "api": "users/menu_from_code/liste_gestionnaire",
      "application": "GeoNature",
      "keyValue": "id_role",
      "keyLabel": "nom_complet",
      "multiple": false,
      "required": true
    },
    "comments": {
      "type_widget": "textarea",
      "attribut_label": "Remarque générale"
    },

    "sites_group_name": {
      "type_widget": "text",
      "attribut_label": "Nom de l'unité de gestion",
      "required": true,
      "definition": "Nom du groupe site."
    },
    "sites_group_code": {
      "type_widget": "text",
      "attribut_label": "Code",
      "required": false,
      "hidden": true
    },
    "sites_group_description": {
      "type_widget": "textarea",
      "attribut_label": "Description de l'unité de gestion",
      "hidden": false
    },
    "nb_visits": {
      "attribut_label": "Nombre de passages"
    },
    "id_gestionnaire_secondaire": {
      "attribut_label": "Gestionnaire(s) secondaire(s)",
      "type_widget": "observers",
      "type_util": "user",
      "api": "users/menu_from_code/liste_gestionnaire",
      "application": "GeoNature",
      "keyValue": "id_role",
      "keyLabel": "nom_complet",
      "multiple": true,
      "required": true
    },
    "gestionnaire_actif": {
      "type_widget": "bool_checkbox",
      "attribut_label": "Actif",
      "value": true
    },
    "id_proprietaire": {
      "attribut_label": "Propriétaire",
      "type_widget": "observers",
      "type_util": "user",
      "api": "users/menu_from_code/liste_proprietaire",
      "application": "GeoNature",
      "keyValue": "id_role",
      "keyLabel": "nom_complet",
      "multiple": false,
      "required": true
    },
    "condition_acces": {
      "type_widget": "textarea",
      "attribut_label": "Condition d'accès",
      "hidden": false
    },
    "debut_gestion_cat": {
      "type_widget": "date",
      "attribut_label": "Date de début de gestion*",
      "required": true
    },
    "fin_gestion_cat": {
      "type_widget": "date",
      "attribut_label": "Date de fin de gestion*",
      "required": true
    },
    "ressource_documentaire": {
      "type_widget": "textarea",
      "attribut_label": "Ressource documentaire",
      "hidden": false
    },
    "medias": {
      "hidden": false,
      "type_widget": "medias",
      "attribut_label": "Photograhies : précisez l'orientation de votre photo dans le titre (nord / sud / est / ouest)",
      "schema_dot_table": "gn_monitoring.t_base_sites"
    }
  },
  "change": [
    "({objForm, meta}) => {",
    "if (objForm.controls['debut_gestion_cat'].value != null &&",
    "objForm.controls['fin_gestion_cat'].value != null) {",
    "var debutDate = new Date(objForm.controls['debut_gestion_cat'].value);",
    "var finDate = new Date(objForm.controls['fin_gestion_cat'].value);",

    "if (debutDate > finDate) {",
    "objForm.controls['debut_gestion_cat'].setValue(null);",
    "objForm.controls['fin_gestion_cat'].setValue(objForm.controls['debut_gestion_cat'].value);",
    "}",
    "}",

    "}"
  ]
}
  