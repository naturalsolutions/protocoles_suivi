{
  "cruved": { "C": 1, "U": 1, "D": 3 },
  "display_properties": [
    "presence_cadavre",
    "cd_nom",
    "count_min",
    "count_max",
    "stade_de_vie",
    "statut_biologique",
    "sexe",
    "hauteur_veg",
    "presence_foret",
    "type_colision",
    "ditance_eol",
    "heure_obs"
  ],
  "display_list": ["cd_nom", "count_min", "count_max"],
  "map_label_field_name": "base_site_code",
  "redirect_to_parent": true,
  "specific": {
    "presence_cadavre": {
      "type_widget": "select",
      "attribut_label": "Présence d'un cadavre",
      "values": [
        "1: Présence d'un cadavre",
        "0: Absence de cadavre durant la prospection"
      ],
      "default":"0: Absence de cadavre durant la prospection",
      "required": true
    },
    "heure_obs": {
      "type_widget": "time",
      "attribut_label": "Heure observation",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "ditance_eol": {
      "type_widget": "number",
      "attribut_label": "Distance à l'éolienne la plus proche",
      "definition": "Distance en mètre ",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')",
      "min":0
    },
    "type_colision": {
      "type_widget": "select",
      "attribut_label": "Type de collision",
      "values": [
        "Ble: blessure visible",
        "Bar: barotrauma (identifié par autopsie)",
        "I: indéterminé."
      ],
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "etat_cadavre": {
      "type_widget": "select",
      "attribut_label": "Etat du cadavre",
      "values": ["B: bon", "D: dégradé", "TD: très dégradé"],
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "presence_foret": {
      "type_widget": "select",
      "attribut_label": "Localisation du cadavre en forêt",
      "values": ["1: forêt", "0: hors forêt"],
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "hauteur_veg": {
      "type_widget": "number",
      "attribut_label": "Hauteur de la végétation",
      "definition": "Hauteur de la végétation herbacée à buissonnante à l'emplacement  du cadavre en centimètres",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')",
      "min":0
    },
    "cd_nom": {
      "type_widget": "taxonomy",
      "attribut_label": "Espèces observées",
      "keyValue": "cd_nom",
      "keyLabel": "__MODULE.TAXONOMY_DISPLAY_FIELD_NAME",
      "multiple": false,
      "api": "taxref/allnamebylist/__MODULE.ID_LIST_TAXONOMY",
      "application": "TaxHub",
      "type_util": "taxonomy",
      "required": true
    },
    "sexe": {
      "type_widget": "datalist",
      "attribut_label": "Sexe",
      "api": "nomenclatures/nomenclature/SEXE",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')",
      "filters": { "cd_nomenclature": ["1", "2", "3"] }
    },
    "statut_biologique": {
      "type_widget": "datalist",
      "attribut_label": "Statut biologique du cadavre.",
      "api": "nomenclatures/nomenclature/STATUT_BIO",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')",
      "filters": {
        "cd_nomenclature": ["3", "9", "2"]
      }
    },
    "stade_de_vie": {
      "type_widget": "datalist",
      "attribut_label": "Stade de vie",
      "api": "nomenclatures/nomenclature/STADE_VIE",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "required": "({value}) => value.presence_cadavre == \"1: Présence d'un cadavre\"",
      "hidden": "({value}) => value.presence_cadavre != \"1: Présence d'un cadavre\" ",
      "filters": {
        "cd_nomenclature": ["1", "2", "3"]
      }
    },
    "count_min": {
      "type_widget": "number",
      "attribut_label": "Dénombrement (minimum)",
      "min": 0,
      "value": 0,
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "count_max": {
      "type_widget": "number",
      "attribut_label": "Dénombrement (maximum)",
      "min": "({value}) => value.count_min",
      "required": "({value}) => value.presence_cadavre?.includes('1')",
      "hidden": "({value}) => !value.presence_cadavre?.includes('1')"
    },
    "medias": {
      "hidden": true,
      "type_widget": "medias",
      "attribut_label": "Médias",
      "schema_dot_table": "gn_monitoring.t_observations"
    }
  }
}
